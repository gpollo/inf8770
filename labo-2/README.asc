= Laboratoire 2

[.text-center]
Pipeline JPEG2000

[.text-center]
Gabriel-Andrew Pollo-Guilbert, _1837776_

== Question 1

Le sous-échantillonnage de RGB vers YUV 4:2:0 permet une meilleure compression
générale de l'image. En effet, ce sous-échantillonnage réduit le nombre de
pixels de 4 pour les plans U et V.

La table suivante montre les différents taux de compression causé par différent
sous-échantillonnage. Même si l'espace de couleur RGB n'est pas normalement
utilisé avec des sous-échantillonage, ils ont quand même été mis à des fins de
comparaisons. On remarque qu'un sous-échantillonnage 4:1:0 ou même 4:2:0 augmente
considérablement la compression versus aucun sous-échantillonnage, c'est-à-dire
4:4:4.

[quote]
--
include::table/stats-subsampling.asc[]
--

La table suivante montre certaines images résultantes de ces sous-échantillionnages.
On remarque premièrement que la différence entre un sous-échantillionnage YUV
4:4:4 ou 4:1:0 est pratiquement indiscernable. Pourtant, le deuxième offre
un facteur de compression de plus de 20%.

Cela dit, il est possible de voir des artéfacts de couleur si on effectue un
sous-échantillionnage similaire sur un espace de couleur RGB, même si le
facteur de compression est similaire à son égal YUV. En effet, la conversion
RGB vers YUV est utile lorsqu'on sous-échantillionne par la suite, car cela
nous permet d'enlever de l'information de couleurs auxquels nos yeux sont moins
sensible.

Bref, la sous-échantillionnage YUV permet une meilleure compression tout en
conservant une bonne qualité de couleur dans l'image. Le désavantage principale
est qu'il faut toujours reconvertir vers un espace RGB lorsque l'image doit
être affichée car la majorité des écrans ou des projecteurs fonctionnent avec
ces couleurs.

[quote]
--
.Figure 1. Comparaison des sous-échantillonnages YUV444, YUV410 et RGB410
[.text-center]
image:tests/3-decoded/yuv444.png[pdfwidth=32.88%]
image:tests/3-decoded/yuv410.png[pdfwidth=32.88%]
image:tests/3-decoded/rgb410.png[pdfwidth=32.88%]
--

== Question 2

L'avantage principal d'utiliser une transformée d'ondelettes discrètes comme
celle de Haar ou de Daubechies est de pouvoir obtenir une grande quantité
de valeurs très basses, voir nulle dans 3 des quadrants de l'image. En
augmentant le niveau de récursion de la transformée, il est possible
d'aller chercher plus valeurs zéros. La figure suivante montre les effets
de l'application d'une transformée en ondelettes de Haar de récursion 0 (image
original), 1 et 2.

[quote]
--
.Figure 2. Comparaison de différents niveaux de récusion pour les ondelettes de Haar
[.text-center]
image:tests/3-decoded/dummy0.png[pdfwidth=32.88%]
image:tests/3-decoded/dummy1.png[pdfwidth=32.88%]
image:tests/3-decoded/dummy2.png[pdfwidth=32.88%]
--

La transformée en ondelettes par elle-même ne permet pas de compresser. Elle ne
fait que déplacer l'information dans l'image. En fait, cette transformation
mathématique est même réversible dans le cas où les calculs ont été effectués
sur des nombres flottants. 

Cela dit, ce déplacement de l'information permet de concentrer les valeurs
importantes dans un coin de l'image en laissant des valeurs moins significatives
dans les autres coins. Par la suite, le quantificateur à zone morte peut
facilement éléminer les valeurs moins importantes en les arrondissant à zéro
dans le cas où elles se trouvent dans sa zone morte.

Même si à première vue, on pourrait croire qu'il suffit d'appliquer la
transformée plusieurs fois récursivement pour obtenir de plus en plus de zéro,
il faut garder à l'esprit qu'elle ne compresse pas l'information et qu'il y
aura plus de perte dans le quantificateur. Par conséquent, pour conserver une
qualité similaire tout en augmentant le nombre de récursion, il faut diminer
la taille de la zone morte dans le quantificateur.

== Question 3

En utilisant un quantificateur avec peu de perte (zone morte de largeur 1 avec
des marches de taille 1), le niveau de récusion de la transformée en ondelettes
de Haar ne devrait pas affecter significativement le taux de compression de
l'image. Cela est dû au fait que le transformée est réversible peu importe le
nombre de niveau de récusion. La table suivante montre différents niveaux de
récursions ainsi que la compression atteinte.

[quote]
--
include::table/stats-haar-recursion.asc[]
--

En effet, on peut voir que les taux de compression sont très similaire à
l'exception du niveau de récusion 0 (aucune transformée) et 1. Avec aucune
récusion et le quantificateur utilisé, le taux de compression est donc
principalement au codage LZW utilisé. Avec un niveau de récusion, il est
raisonnable d'assumer que les basses valeurs ajoutées à la fin de l'image ont
dû aider le codage LZW à trouver plus de mots identiques. En ajoutant des
niveaux de récusion, on plafonne ce que le LZW est capable de compresser.

La figure suivante montre les images résultantes d'une compression de niveau 1
et niveau 10. Il y a en effet aucune différence discernable à l'oeil nue.

[quote]
--
.Figure 3. Comparaison d'une récusion d'ondelettes de Haar de niveau 1 et 10
[.text-center]
image:tests/3-decoded/haar-1.png[pdfwidth=32.88%]
image:tests/3-decoded/haar-10.png[pdfwidth=32.88%]
--

== Question 4

[quote]
--
include::table/stats-deadzone-width.asc[]
--

[quote]
--
.Figure 3. Comparaison des zones mortes de taille 1, 256 et 1024 pour la quantification à zone morte
[.text-center]
image:tests/3-decoded/deadzone-width-1.png[pdfwidth=32.88%]
image:tests/3-decoded/deadzone-width-256.png[pdfwidth=32.88%]
image:tests/3-decoded/deadzone-width-1024.png[pdfwidth=32.88%]
--

[quote]
--
include::table/stats-deadzone-delta.asc[]
--

[quote]
--
.Figure 4. Comparaison des pas de taille 1, 256 et 1024 pour la quantification à zone morte
[.text-center]
image:tests/3-decoded/deadzone-delta-1.png[pdfwidth=32.88%]
image:tests/3-decoded/deadzone-delta-256.png[pdfwidth=32.88%]
image:tests/3-decoded/deadzone-delta-1024.png[pdfwidth=32.88%]
--

[quote]
--
include::table/stats-midthread-delta.asc[]
--

[quote]
--
.Figure 5. Comparaison des pas de taille 1, 256 et 1024 pour la quantification à moyenne
[.text-center]
image:tests/3-decoded/midthread-delta-1.png[pdfwidth=32.88%]
image:tests/3-decoded/midthread-delta-256.png[pdfwidth=32.88%]
image:tests/3-decoded/midthread-delta-1024.png[pdfwidth=32.88%]
--

[quote]
--
include::table/stats-mixed.asc[]
--

[quote]
--
.Figure 6. Comparaison des images listées dans la table 6 (gauche à droite)
[.text-center]
image:tests/3-decoded/mixed-h1-dz512.png[pdfwidth=32.88%]
image:tests/3-decoded/mixed-h1-mt512.png[pdfwidth=32.88%]
image:tests/3-decoded/mixed-h4-dz512.png[pdfwidth=32.88%]
image:tests/3-decoded/mixed-h4-mt512.png[pdfwidth=32.88%]
image:tests/3-decoded/mixed-daub-dz512.png[pdfwidth=32.88%]
image:tests/3-decoded/mixed-daub-mt512.png[pdfwidth=32.88%]
--

== Question 5

[quote]
--
include::table/various-images.asc[]
--

[quote]
--
include::table/stats-various-images.asc[]
--

== Question 6

--
include::table/stat-kodak.asc[]
--
